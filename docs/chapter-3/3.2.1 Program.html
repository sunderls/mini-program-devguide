
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>3.2.1 Program Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="3.2.2 Page.html" />
    
    
    <link rel="prev" href="3.2 Program and pages.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Mini Program Development Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../chapter-1/">
            
                <a href="../chapter-1/">
            
                    
                    1. Introduction and Development Environment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../chapter-1/1.1.1-History of Mini Program.html">
            
                <a href="../chapter-1/1.1.1-History of Mini Program.html">
            
                    
                    1.1 Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../chapter-1/1.1.1-History of Mini Program.html">
            
                <a href="../chapter-1/1.1.1-History of Mini Program.html">
            
                    
                    1.1.1 History of Mini Program
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../chapter-1/1.1.2 Difference between Mini Program and Web App.html">
            
                <a href="../chapter-1/1.1.2 Difference between Mini Program and Web App.html">
            
                    
                    1.1.2 Difference between Mini Program and Web App
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../chapter-1/1.2 Why Mini Program is unique.html">
            
                <a href="../chapter-1/1.2 Why Mini Program is unique.html">
            
                    
                    1.2 Why Mini Program is unique
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../chapter-1/1.3.1 Get AppID.html">
            
                <a href="../chapter-1/1.3.1 Get AppID.html">
            
                    
                    1.3 Preparation for Development
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../chapter-1/1.3.1 Get AppID.html">
            
                <a href="../chapter-1/1.3.1 Get AppID.html">
            
                    
                    1.3.1 Get AppID
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="../chapter-1/1.3.2 Install Mini Program Dev Tool.html">
            
                <a href="../chapter-1/1.3.2 Install Mini Program Dev Tool.html">
            
                    
                    1.3.2 Install Mini Program Dev Tool
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.3" data-path="../chapter-1/1.3.3 Create your first Mini Program.html">
            
                <a href="../chapter-1/1.3.3 Create your first Mini Program.html">
            
                    
                    1.3.3 Create your first Mini Program
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.4" data-path="../chapter-1/1.4 Summary.html">
            
                <a href="../chapter-1/1.4 Summary.html">
            
                    
                    1.4 Summary
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../chapter-2/">
            
                <a href="../chapter-2/">
            
                    
                    2 Code Structure of Mini Program
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../chapter-2/2.1 Configuration.html">
            
                <a href="../chapter-2/2.1 Configuration.html">
            
                    
                    2.1 Configuration(JSON)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../chapter-2/2.1.1 An Example.html">
            
                <a href="../chapter-2/2.1.1 An Example.html">
            
                    
                    2.1.1 An Example
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../chapter-2/2.1.2 JSON syntax.html">
            
                <a href="../chapter-2/2.1.2 JSON syntax.html">
            
                    
                    2.1.2 JSON syntax
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../chapter-2/2.2 View.html">
            
                <a href="../chapter-2/2.2 View.html">
            
                    
                    2.2 View (WXML)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../chapter-2/2.2.1 Introduction.html">
            
                <a href="../chapter-2/2.2.1 Introduction.html">
            
                    
                    2.2.1 Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../chapter-2/2.2.2 Data Binding.html">
            
                <a href="../chapter-2/2.2.2 Data Binding.html">
            
                    
                    2.2.2 Data Binding
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../chapter-2/2.2.3 Logical Operators.html">
            
                <a href="../chapter-2/2.2.3 Logical Operators.html">
            
                    
                    2.2.3 Logical Operators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.4" data-path="../chapter-2/2.2.4 Conditional Statement.html">
            
                <a href="../chapter-2/2.2.4 Conditional Statement.html">
            
                    
                    2.2.4 Conditional Statement
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.5" data-path="../chapter-2/2.2.5 List Rendering.html">
            
                <a href="../chapter-2/2.2.5 List Rendering.html">
            
                    
                    2.2.5 List Rendering
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.6" data-path="../chapter-2/2.2.6 Template.html">
            
                <a href="../chapter-2/2.2.6 Template.html">
            
                    
                    2.2.6 Template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.7" data-path="../chapter-2/2.2.7 import_include.html">
            
                <a href="../chapter-2/2.2.7 import_include.html">
            
                    
                    2.2.7 import/include
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.8" data-path="../chapter-2/2.2.8 Common Properties.html">
            
                <a href="../chapter-2/2.2.8 Common Properties.html">
            
                    
                    2.2.8 Common Properties
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../chapter-2/2.3 WXSS stylesheet.html">
            
                <a href="../chapter-2/2.3 WXSS stylesheet.html">
            
                    
                    2.3 WXSS stylesheet
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../chapter-2/2.3.1 File Structure.html">
            
                <a href="../chapter-2/2.3.1 File Structure.html">
            
                    
                    2.3.1 File Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../chapter-2/2.3.2 Units.html">
            
                <a href="../chapter-2/2.3.2 Units.html">
            
                    
                    2.3.2 Units
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="../chapter-2/2.3.3 imports in WXSS.html">
            
                <a href="../chapter-2/2.3.3 imports in WXSS.html">
            
                    
                    2.3.3 imports in WXSS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.4" data-path="../chapter-2/2.3.4 Inline Style.html">
            
                <a href="../chapter-2/2.3.4 Inline Style.html">
            
                    
                    2.3.4 Inline Style
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.5" data-path="../chapter-2/2.3.5 Selector.html">
            
                <a href="../chapter-2/2.3.5 Selector.html">
            
                    
                    2.3.5 Selector
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.6" data-path="../chapter-2/2.3.6 Official UI library.html">
            
                <a href="../chapter-2/2.3.6 Official UI library.html">
            
                    
                    2.3.6 Official UI library
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../chapter-2/2.4 JavaScript.html">
            
                <a href="../chapter-2/2.4 JavaScript.html">
            
                    
                    2.4 JavaScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="../chapter-2/2.4.1 ECMAScript.html">
            
                <a href="../chapter-2/2.4.1 ECMAScript.html">
            
                    
                    2.4.1 ECMAScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.2" data-path="../chapter-2/2.4.2 Runtime Environment.html">
            
                <a href="../chapter-2/2.4.2 Runtime Environment.html">
            
                    
                    2.4.2 Runtime Environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.3" data-path="../chapter-2/2.4.3 Modularization.html">
            
                <a href="../chapter-2/2.4.3 Modularization.html">
            
                    
                    2.4.3 Modularization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.4" data-path="../chapter-2/2.4.4 Running order.html">
            
                <a href="../chapter-2/2.4.4 Running order.html">
            
                    
                    2.4.4 Running order
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.5" data-path="../chapter-2/2.4.5 Scope.html">
            
                <a href="../chapter-2/2.4.5 Scope.html">
            
                    
                    2.4.5 Scope
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../chapter-2/2.5 Summary">
            
                <span>
            
                    
                    2.5 Summary
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="./">
            
                <a href="./">
            
                    
                    3 Mini Program host environment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="3.1 Rendering Layer and Logic Layer.html">
            
                <a href="3.1 Rendering Layer and Logic Layer.html">
            
                    
                    3.1 Rendering Layer and Logic Layer
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="3.1.1 Render Hello World Page.html">
            
                <a href="3.1.1 Render Hello World Page.html">
            
                    
                    3.1.1 Render "Hello World" Page
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="3.1.2 Communication between Processes.html">
            
                <a href="3.1.2 Communication between Processes.html">
            
                    
                    3.1.2 Communication between Processes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="3.1.3 Data-Driven.html">
            
                <a href="3.1.3 Data-Driven.html">
            
                    
                    3.1.3 Data-Driven
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.4" data-path="3.1.4 UI Rendering with 2 processes.html">
            
                <a href="3.1.4 UI Rendering with 2 processes.html">
            
                    
                    3.1.4 UI Rendering with 2 processes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="3.2 Program and pages.html">
            
                <a href="3.2 Program and pages.html">
            
                    
                    3.2 Program and pages
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.4.2.1" data-path="3.2.1 Program.html">
            
                <a href="3.2.1 Program.html">
            
                    
                    3.2.1 Program
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="3.2.2 Page.html">
            
                <a href="3.2.2 Page.html">
            
                    
                    3.2.2 Page
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="3.3 Component.html">
            
                <a href="3.3 Component.html">
            
                    
                    3.3 Component
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="3.4 API.html">
            
                <a href="3.4 API.html">
            
                    
                    3.4 API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="3.5 Events.html">
            
                <a href="3.5 Events.html">
            
                    
                    3.5 Events
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="3.6 Compatibility.html">
            
                <a href="3.6 Compatibility.html">
            
                    
                    3.6 Compatibility
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="3.7 Summary.html">
            
                <a href="3.7 Summary.html">
            
                    
                    3.7 Summary
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../chapter-4/">
            
                <a href="../chapter-4/">
            
                    
                    4 Case Study
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../chapter-4/4.1 Basic development flow.html">
            
                <a href="../chapter-4/4.1 Basic development flow.html">
            
                    
                    4.1 Basic development flow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../chapter-4/4.2 Basic Layout - Flex.html">
            
                <a href="../chapter-4/4.2 Basic Layout - Flex.html">
            
                    
                    4.2 Basic Layout - Flex
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../chapter-4/4.3 Common User Interactions.html">
            
                <a href="../chapter-4/4.3 Common User Interactions.html">
            
                    
                    4.3 Common User Interactions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.3.1" data-path="../chapter-4/4.3.1 Touch Feedback.html">
            
                <a href="../chapter-4/4.3.1 Touch Feedback.html">
            
                    
                    4.3.1 Touch Feedback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.2" data-path="../chapter-4/4.3.2 Toast and Modal.html">
            
                <a href="../chapter-4/4.3.2 Toast and Modal.html">
            
                    
                    4.3.2 Toast and Modal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.3" data-path="../chapter-4/4.3.3 Page Scroll.html">
            
                <a href="../chapter-4/4.3.3 Page Scroll.html">
            
                    
                    4.3.3 Page Scroll
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../chapter-4/4.4 HTTPS request.html">
            
                <a href="../chapter-4/4.4 HTTPS request.html">
            
                    
                    4.4 HTTPS request
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.4.1" data-path="../chapter-4/4.4.1 wx.request.html">
            
                <a href="../chapter-4/4.4.1 wx.request.html">
            
                    
                    4.4.1 wx.request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.2" data-path="../chapter-4/4.4.2 Server API.html">
            
                <a href="../chapter-4/4.4.2 Server API.html">
            
                    
                    4.4.2 Server API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.3" data-path="../chapter-4/4.4.3 Request Parameters.html">
            
                <a href="../chapter-4/4.4.3 Request Parameters.html">
            
                    
                    4.4.3 Request Parameters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.4" data-path="../chapter-4/4.4.4 About Response.html">
            
                <a href="../chapter-4/4.4.4 About Response.html">
            
                    
                    4.4.4 About Response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.5" data-path="../chapter-4/4.4.5 Some Tips.html">
            
                <a href="../chapter-4/4.4.5 Some Tips.html">
            
                    
                    4.4.5 Some Tips
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.6" data-path="../chapter-4/4.4.6 Debugging.html">
            
                <a href="../chapter-4/4.4.6 Debugging.html">
            
                    
                    4.4.6 Debugging
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >3.2.1 Program</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="321-program">3.2.1 Program</h2>
<p>Mini Program means program in service level, &quot;Program&quot; means program instance in code level, to avoid misunderstanding, we&apos;ll use App to refer &quot;Program&quot;.</p>
<h3 id="1-constructor-app">1. Constructor <code>App()</code></h3>
<p>Host environment provide <code>App()</code> to create a new App, <code>App()</code> must be put in <code>app.js</code> at the root folder. App is singleton, in other JS scripts, <code>getApp()</code> can be used to access the instance.</p>
<p><em>code snippet 3-3 getApp()</em></p>
<pre><code class="lang-js"><span class="hljs-comment">// other.js</span>

<span class="hljs-keyword">var</span> appInstance = getApp()
</code></pre>
<p>Like following code snippets shows, <code>App()</code> accepts an Object as parameter. Paramter details are listed in the table below. <code>onLaunch</code>, <code>onShow</code>, <code>onHide</code> are lifycycle hooks of an app, we&apos;ll look at them later. <code>onError</code> will be explained in Chpater 8.</p>
<p><em>code snippet 3-4 App constructor</em></p>
<pre><code class="lang-js">App({
  onLaunch: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{},
  onShow: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{},
  onHide: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{},
  onError: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msg</span>) </span>{},
  globalData: <span class="hljs-string">&apos;I am global data&apos;</span>
})
</code></pre>
<p>*table 3-1 Paramters of <code>App()</code></p>
<table>
<thead>
<tr>
<th>paramter name</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>onLaunch</td>
<td>Function</td>
<td>called only once when app is initialized</td>
</tr>
<tr>
<td>onShow</td>
<td>Function</td>
<td>called when app starts, or comes to foreground from background</td>
</tr>
<tr>
<td>onHide</td>
<td>Function</td>
<td>called when app goes to background</td>
</tr>
<tr>
<td>onError</td>
<td>Function</td>
<td>called when errors happen, or API fails.</td>
</tr>
<tr>
<td>other fields</td>
<td>any</td>
<td>these custom fields are assigned to the the App instance</td>
</tr>
</tbody>
</table>
<h3 id="2-lifecycle-and-opening-scene">2. Lifecycle and Opening Scene</h3>
<p>The first time mini program is opend, WeChat Native prepares the host environment, get mini program code package from remote or cache and injects them into host environment, when everything is initialized, WeChat will call <code>onLaunch()</code> of App instance.</p>
<p>Mini Program could be closed by tapping the close button at top right,
or switched to backgrounde mode by tapping Homde button, but in either cases mini programs are not terminated. <code>onHide()</code> will be called.</p>
<p>When mini program is opend again, WeChat Native will activate the instance at background, and set it to foreground, and <code>onShow()</code> will be called.</p>
<p>We can see that lifecycle hooks are called automatically by WeChat App&apos;s response to user interactions. To avoid confusions in program, <strong>we shouldn&apos;t call lifecycle hooks manually</strong>. </p>
<p>There are many scenes of mini program being opened, it maybe opened in groupd chat, in mini program list, from QR code scanning or event from another mini program. For the needs to different logic according to different opening scenes, <code>onLaunch()</code> and <code>onShow()</code> will be attached with these information as paramter <code>options</code>. Details of these paramters are listed in code snippet 3-5 and table 3-2. These scenario may change rapidly so please refer to the official document: <a href="https://mp.weixin.qq.com/debug/wxadoc/dev/framework/app-service/app.html" target="_blank">https://mp.weixin.qq.com/debug/wxadoc/dev/framework/app-service/app.html</a></p>
<p><em>code snippet 3-5 onLaunch and onShow</em></p>
<pre><code class="lang-js">App({
  onLaunch: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{ <span class="hljs-built_in">console</span>.log(options) },
  onShow: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{ <span class="hljs-built_in">console</span>.log(options) }
})
</code></pre>
<p><em>table 3-2 paramters of onLaunch and onShow</em></p>
<table>
<thead>
<tr>
<th>field</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>path</td>
<td>String</td>
<td>the current path of app being opened</td>
</tr>
<tr>
<td>query</td>
<td>Object</td>
<td>query object</td>
</tr>
<tr>
<td>scene</td>
<td>Number</td>
<td>scene ids, refer to official document for details</td>
</tr>
<tr>
<td>shareTicket</td>
<td>String</td>
<td>shareTicket, refer to official document for details</td>
</tr>
<tr>
<td>referrrerInfo</td>
<td>Object</td>
<td>when opened from another mini program or Official Account</td>
</tr>
<tr>
<td>referrerInfo.appId</td>
<td>String</td>
<td>appId of referrer mini progra of Official Account, details as below</td>
</tr>
<tr>
<td>referrerInfo.extraData</td>
<td>Object</td>
<td>data passed when scene is 1037 or 1038</td>
</tr>
</tbody>
</table>
<p><em>table 3-3 following scenes support referrrerInfo.appId</em></p>
<table>
<thead>
<tr>
<th>scene Id</th>
<th>scene</th>
<th>meaning of appId </th>
</tr>
</thead>
<tbody>
<tr>
<td>1020</td>
<td>related mini program list in Official Account profile</td>
<td>official account appId</td>
</tr>
<tr>
<td>1035</td>
<td>Official Account custom menu</td>
<td>official account appId</td>
</tr>
<tr>
<td>1036</td>
<td>App Share Message card</td>
<td>source app&apos;s appId</td>
</tr>
<tr>
<td>1037</td>
<td>opened in another mini program</td>
<td>source mini program&apos;s appId</td>
</tr>
<tr>
<td>1038</td>
<td>returned from another mini program</td>
<td>source mini program&apos;s appId</td>
</tr>
<tr>
<td>1043</td>
<td>official account&apos;s template message</td>
<td>source official account&apos;s appId</td>
</tr>
</tbody>
</table>
<h3 id="3-global-data">3. Global Data</h3>
<p>We&apos;ve already explained in 3.1.2 that JS scripts in mini program are run in JsCore, every page have its own WebView, so when page switching happens in mini program, the scripts are still in the same JS core process.</p>
<p>App is singleton, so this instance can be used to share data across pages. App constructor can be used to initialize the global data.</p>
<p><em>code 3-6 Global Data</em></p>
<pre><code class="lang-js"><span class="hljs-comment">// app.js</span>
App({
  globalData: <span class="hljs-string">&apos;I am global data&apos;</span> <span class="hljs-comment">// global data</span>
})
<span class="hljs-comment">// another script: other.js</span>
<span class="hljs-keyword">var</span> appInstance = getApp()
<span class="hljs-built_in">console</span>.log(appInstance.globalData) <span class="hljs-comment">// output: I am global data</span>
</code></pre>
<p>At the same time, because all scripts are run in the same JSCore, timers or intervals created by <code>setTimeout()</code>/<code>setInterval()</code> are not cleared automatically when page switches, they have to be cleared manually.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="3.2 Program and pages.html" class="navigation navigation-prev " aria-label="Previous page: 3.2 Program and pages">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="3.2.2 Page.html" class="navigation navigation-next " aria-label="Next page: 3.2.2 Page">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"3.2.1 Program","level":"1.4.2.1","depth":3,"next":{"title":"3.2.2 Page","level":"1.4.2.2","depth":3,"path":"chapter-3/3.2.2 Page.md","ref":"chapter-3/3.2.2 Page.md","articles":[]},"previous":{"title":"3.2 Program and pages","level":"1.4.2","depth":2,"path":"chapter-3/3.2 Program and pages.md","ref":"chapter-3/3.2 Program and pages.md","articles":[{"title":"3.2.1 Program","level":"1.4.2.1","depth":3,"path":"chapter-3/3.2.1 Program.md","ref":"chapter-3/3.2.1 Program.md","articles":[]},{"title":"3.2.2 Page","level":"1.4.2.2","depth":3,"path":"chapter-3/3.2.2 Page.md","ref":"chapter-3/3.2.2 Page.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"chapter-3/3.2.1 Program.md","mtime":"2018-04-20T06:43:18.406Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-04-25T16:26:18.356Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

